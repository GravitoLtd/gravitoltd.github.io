<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../../../img/favicon.ico" />
    <title>Version 3(Internal) (Latest) - Gravito Documentation</title>
    <link rel="stylesheet" href="../../../css/theme.css" />
    <link rel="stylesheet" href="../../../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
        <link href="../../../css/custom.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Version 3(Internal) (Latest)";
        var mkdocs_page_input_path = "Gravito_TCF_2.2_CMP/advanced/version3.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../../../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
      <script>hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../../..">
          <img src="../../../img/logo.png" class="logo" alt="Logo"/>
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption"><span class="caption-text">Getting started</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../../Getting_started/Frequently_Asked_Questions/">Frequently Asked Questions</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../Getting_started/Register/">Register</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../Getting_started/Support/">Support</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../Getting_started/Release_Notes/">Release Notes</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Gravito Intelligent CMP</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../../Gravito_Intelligent_CMP/Getting_Started/">Getting Started</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../Gravito_Intelligent_CMP/Setup_and_Design/">Setup and Design</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../Gravito_Intelligent_CMP/GTM_Template/">GTM Template</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../Gravito_Intelligent_CMP/Release_Notes/">Release Notes</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../Gravito_Intelligent_CMP/Advanced_Features/">Advanced Features</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Gravito TCF 2.2 CMP</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../Getting_Started/">Getting Started</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../Setup_and_Design/">Setup and Design</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../Mobile_apps/">Mobile apps</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../Release_Notes/">Release Notes</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../Advanced_features/">Advanced features</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Gravito SDK</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../../Gravito_SDK/Getting_Started/">Getting Started</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../Gravito_SDK/Release_Notes/">Release Notes</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../Gravito_SDK/Version_2_%28Latest%29/">Version 2 (Latest)</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Gravito API</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../../Gravito_API/Getting_Started/">Getting Started</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../Gravito_API/Setup_and_Validation/">Setup and Validation</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../Gravito_API/Version_3_%28Latest%29/">Version 3 (Latest)</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../Gravito_API/Version_2/">Version 2</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../Gravito_API/Microprofile/">Microprofile</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../Gravito_API/CustomerdataApi/">Customer Data API</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Other Features</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../../Other_Features/Cookie_Scanner/">Cookie Scanner</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../Other_Features/GVL_Comparison/">GVL Comparison</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../Other_Features/Prebid_User_Id_Module/">Prebid User Id Module</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Try it out</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../../Try_it_out/Playbooks/">Playbooks</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../..">Gravito Documentation</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../.." class="icon icon-home" aria-label="Docs"></a></li>
      <li class="breadcrumb-item active">Version 3(Internal) (Latest)</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="version-3internal-latest">Version 3(Internal) (Latest)</h1>
<p>Note: Version 3 does not correspond to TCF Version 3 but it is Internal Version 3 for gravito CMP, and is TCF version 2 complaint.</p>
<h2 id="how-it-works">How it works?</h2>
<p>Configuration</p>
<p>TCF CMP can be configure and customize as per your need with the help of configuration object.You can generate this configuration object using our Admin Portal or you can create your own from scratch. Following is the example of config object for TCF CMP.</p>
<pre><code>window.gravitoCMPConfig = {
settings: {
type: &quot;TCF&quot;,
useGravitoBackend: true,
catchCMPEvents: true,
sdkVersion: 2,
userIdModule: false,
backendUrl: &quot;&quot;,
version: &quot;bundle_latest_3&quot;,
},
core: {
cookieName: &quot;TcString&quot;,
cookieExpiry: 2,
useTopDomain: false,
syncAfter: 1800,
settingBtnClassname: &quot;manageSettings&quot;,
version: 2,
purposeOneTreatment: true,
publisherCountryCode: &quot;EN&quot;,
googleTcfId: 755,
purposes: [
  {
    type: &quot;purposes&quot;,
    id: 1,
  },
  {
    type: &quot;stacks&quot;,
    id: 26,
  },
  {
    type: &quot;purposes&quot;,
    id: 10,
  },
],
specialFeatures: [1, 2],
specialPurposes: [1, 2],
features: [1, 2, 3],
vendors: [2, 6, 8, 511, 11, 14, 278, 755],
nonTCFVendors: [
  {
    type: &quot;nonTCFVendors&quot;,
    id: 2,
    name: &quot;Amazon&quot;,
    description: &quot;description for amazon&quot;,
    isConsentable: false,
  },
],
customPurposes: [
  {
    type: &quot;customPurpose&quot;,
    id: 1,
    name: &quot;Data Collection&quot;,
    description:
      &quot;Gravito can collect data and can use it for better experience of its customers&quot;,
    descriptionLegal:
      &quot;Gravito can collect data and can use it for better experience of its customers&quot;,
    isLegitimate: true,
  },
  {
    type: &quot;customPurpose&quot;,
    id: 2,
    name: &quot;Targeting&quot;,
    description: &quot;Gravito can use data for targeting its customers&quot;,
    descriptionLegal: &quot;Gravito can use data for targeting its customers&quot;,
    isLegitimate: false,
  },
],
publisherRestrictions: [
  {
    purposeID: 1,
    restrictionType: &quot;REQUIRE_CONSENT&quot;,
    vendors: [6, 12],
  },
  {
    purposeID: 1,
    restrictionType: &quot;REQUIRE_CONSENT&quot;,
    vendors: [8],
  },
  {
    purposeID: 2,
    restrictionType: &quot;REQUIRE_CONSENT&quot;,
    vendors: [8],
  },
],
},
text: {
firstLayer: {
  title: &quot;We need your consent to provide personalized experience&quot;,
  introductionText:
    &quot;Gravito and its &lt;span id='partners-link'&gt;third-party vendors&lt;/span&gt; collect personal data (e.g. IP address, device identifier) through the use of cookies and other technical methods which are storing and accessing data on your device to provide the best user experience and show targetted content and advertising.&quot;,
  consentableItemDescription:
    &quot;Gravito and its partners require consent for following:&quot;,
  legalFooter:
    'By accepting, you are allowing data processing within the service, rejection can affect the user experience. Some third-party vendors might use their legitimate interest to operate, you can object that or change other settings at any time by selecting &quot;Settings&quot; at the bottom of the page.',
  privacyPolicyUrl: &quot;https://www.gravito.net/#privacy-policy&quot;,
  privacyLabel: &quot;Privacy Policy&quot;,
  actions: [&quot;Settings&quot;, &quot;Accept All&quot;],
},
secondLayer: {
  title: &quot;Gravito Setting title changed&quot;,
  introductionText:
    &quot;Please select from the following list of purposes to help us serve you better.&quot;,
  tabLabels: [&quot;Purposes and Characteristics&quot;, &quot;Vendors&quot;],
  copyTCstringTooltip: &quot;Click here to copy TC string to clipboard&quot;,
  checkBoxLabels: {
    consent: &quot;Consent&quot;,
    legitimateInterest: &quot;Legitimate interest&quot;,
  },
  actions: [&quot;Accept All&quot;, &quot;Accept Selected&quot;, &quot;Reject All&quot;],
},
thirdLayer: {
  confirmationForUncheck: {
    heading: &quot;Are you sure you want to disable?&quot;,
    paragraphs: [
      &quot;These cookies or other technical methods are important so that we can provide you with a better and more personal user experience.&quot;,
    ],
  },
  confirmationForAcceptSelected: {
    heading: &quot;Are you sure you want to disable?&quot;,
    paragraphs: [
      &quot;Cookies and other technical methods are important so that we can provide you with a better and more personal user experience.&quot;,
      &quot;Without cookies or other technical methods, our ability to develop our services based on your preferences becomes more difficult, some features may be blocked, and your user experience may deteriorate.&quot;,
    ],
  },
  actions: [&quot;Cancel&quot;, &quot;Yes&quot;],
},
cookieReportLayer: {
  buttonTitle: &quot;Cookie Report&quot;,
  heading: &quot;Cookie Reports layer header&quot;,
  introductionText:
    &quot;Cookies are small text files that websites can use to make the user experience more efficient. We use cookies on the website. We use cookies on this website to improve the visitor experience and to better serve you. Based on our scan, this is how the cookies that will be used based on the preference set by you.&quot;,
  beforeAcceptHeader: &quot;Before Accepting&quot;,
  afterAcceptHeader: &quot;After Accepting&quot;,
  nameHeader: &quot;Name&quot;,
  domainHeader: &quot;Domain&quot;,
  descriptionHeader: &quot;Description&quot;,
  cookieTypeHeader: &quot;Cookie Type&quot;,
  expiryHeader: &quot;Expiry in days&quot;,
  httpOnlyHeader: &quot;Http Only&quot;,
  noCookieDataMessage: &quot;No scan results available&quot;,
  noCookieDataBeforeAcceptingMsg:
    &quot;No cookies were found before Accepting the consents on this domain.&quot;,
  noCookieDataAfterAcceptingMsg:
    &quot;No cookies were found after Accepting the consents on this domain &quot;,
},
commonTerms: {
  purposes: &quot;Purposes&quot;,
  consent: &quot;Consent&quot;,
  legitimateInterest: &quot;Legitimate interest&quot;,
  specialPurposes: &quot;Special Purposes&quot;,
  specialFeatures: &quot;Special Features&quot;,
  features: &quot;Features&quot;,
  policyURl: &quot;Policy Url&quot;,
  nonTCFVendors: &quot;Non TCF Vendors&quot;,
  vendors: &quot;Vendor&quot;,
  customPurposes: &quot;Custom Purposes&quot;,
  cookieMaxAge: &quot;Cookie max age (seconds)&quot;,
  disclouserDetails: &quot;Details&quot;,
  disclouserFetchingError: &quot;Unable to get Json data&quot;,
  disclouserHeaderIdentifier: &quot;Identifier&quot;,
  disclouserHeaderDomain: &quot;Domain&quot;,
  disclouserHeaderType: &quot;Type&quot;,
  disclosureHeaderMaxAge: &quot;Max Age(s)&quot;,
  disclosureHeaderPurpose: &quot;Purposes&quot;,
  cookieRefresh: &quot;Cookie refresh&quot;,
  usesCookies: &quot;Uses cookies&quot;,
  usesNonCookieAccess: &quot;Uses non cookie access&quot;,
  yes: &quot;Yes&quot;,
  no: &quot;No&quot;,
  seconds: &quot;seconds&quot;,
  days: &quot;days&quot;,
  alertMessageForCopiedTcString: &quot;CMP Settings Copied&quot;,
},
},
style: {
logoUrl: &quot;https://cdn.gravito.net/logos/gravito_logo_white_background.png&quot;,
primaryColor: &quot;orange&quot;,
secondaryColor: &quot;#666&quot;,
fonts: [
  {
    url: &quot;https://fonts.gstatic.com/s/lato/v17/S6uyw4BMUTPHjxAwXjeu.woff2&quot;,
    unicodeRange:
      &quot;U+0100-024F, U+0259, U+1E00-1EFF, U+2020, U+20A0-20AB, U+20AD-20CF, U+2113, U+2C60-2C7F, U+A720-A7FF;&quot;,
  },
  {
    url: &quot;https://fonts.gstatic.com/s/lato/v17/S6uyw4BMUTPHjx4wXg.woff2&quot;,
    unicodeRange:
      &quot;U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;&quot;,
  },
],
customCSS: &quot;&quot;,
consentInputType: &quot;checkbox&quot;,
useAccordionForPurpose: true,
layoutType: &quot;2-tabs&quot;,
disableConfirmationModal: true,
showCopyTcStringButton: true,
},
};

</code></pre>
<h3 id="deployment">Deployment</h3>
<p>TCF CMP's can be deployed with the help of SDK V2. Add your config object to window.gravitoCMPConifg variable.</p>
<pre><code>window.gravitoCMPConfig = gravitoCMPConfig;

</code></pre>
<h4 id="standalone-tcf-cmp">Standalone TCF CMP.</h4>
<p>To add Standalone TCF CMP add following script in your website below your gravitoCMPConfig object.</p>
<pre><code>var gravitoSDKTag = document.createElement(&quot;script&quot;);
gravitoSDKTag.src = &quot;https://cdn.gravito.net/sdkv2/latest/sdk.js&quot;;
gravitoSDKTag.onload = function () {
  window.gravito.init(&quot;tcfCMP&quot;);
};
document.body.appendChild(gravitoSDKTag);

</code></pre>
<h4 id="tcf-cmp-with-backend">TCF CMP with backend.</h4>
<p>To add TCF CMP with backend add following values to settings section of your config object</p>
<pre><code>window.gravitoCMPConfig = {
  settings: {
    type: &quot;TCF&quot;,
    useGravitoBackend: true,
    backendUrl: &quot;https://gto.yourDomainName&quot;, // if left empty url will be generated from hostname
    version: &quot;bundle_latest_3&quot;,
    sdkVersion: 2,
  },
  //other sections
};

</code></pre>
<p>And add following script in your website below your gravitoCMPConfig object.</p>
<pre><code>var gravitoSDKTag = document.createElement(&quot;script&quot;);
gravitoSDKTag.src = &quot;https://cdn.gravito.net/sdkv2/latest/sdk.js&quot;;
gravitoSDKTag.onload = function () {
  window.gravito.init(&quot;tcfCMP&quot;, &quot;firstParty&quot;);
};
document.body.appendChild(gravitoSDKTag);

</code></pre>
<h2 id="migrating-to-tcf-cmp-version-3">Migrating to TCF CMP Version 3</h2>
<ol>
<li>Add settings section your config Object with following properties.</li>
</ol>
<pre><code>var gravitoCMPConfig = {
  settings: {
    type: &quot;TCF&quot;,
    useGravitoBackend: false, // Set this flag to true if you want to use gravito backend with TCF CMP

    backendUrl: &quot;&quot;, // This will be the URL of your gravito firstparty domain for backend support EX: https://gto.yourdomain.net. if left empty it will be evaluated from your hosted domain.

    version: &quot;bundle_latest_3&quot;, // This will be the version of your TCFCMP. bundle_latest_3 is recommended

    sdkVersion: 2, // Don;t change this value ,

    catchCMPEvents: false, // Set this value to true if you want to capture CMP events and generate report on https://admin.gravito.net dashborad.
  },
  // other properties
};

</code></pre>
<ol>
<li>TCF CMP Version 3 should be deployed with gravito SDK version 2.Change your deployment script as follows.</li>
</ol>
<pre><code>window.gravitoCMPConfig = gravitoCMPConfig; // Replace this with your config object;var gravitoSDKTag = document.createElement(&quot;script&quot;);
gravitoSDKTag.src = &quot;https://cdn.gravito.net/sdkv2/latest/sdk.js&quot;;
gravitoSDKTag.onload = function () {
  window.gravito.init(&quot;tcfCMP&quot;); // For Standalone TCF CMP
// window.gravito.init(&quot;tcfCMP&quot;,firstParty); // For TCF CMP with backend
};
document.body.appendChild(gravitoSDKTag);

</code></pre>
<ol>
<li>TCF CMP Version 3 adds some special feature such as providing your custom html for first layer of UI, Configuring necessary consents. To use any of them please contact gravito support.</li>
<li>Test your implementation of TCF CMP Version 3 thoroughly to ensure that all features are working as expected and that there are no issues with backend integration.</li>
<li>Once you have confirmed that everything is working as expected, you can proceed with deploying TCF CMP Version 3 on your production website.</li>
</ol>
<p>Note Please note that this is a general guide and your specific implementation may require additional steps. It is always recommended to test your implementation thoroughly before deploying it to production. If you have any questions or issues during the migration process, please reach out to Gravito support for assistance.</p>
              
            </div>
          </div><footer>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
    
  </span>
</div>
    <script src="../../../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "../../..";</script>
    <script src="../../../js/theme_extra.js"></script>
    <script src="../../../js/theme.js"></script>
      <script src="../../../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
