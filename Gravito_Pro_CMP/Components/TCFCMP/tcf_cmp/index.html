<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../../../../img/favicon.ico" />
    <title>PRO CMP - TCF CMP Component - Gravito Documentation</title>
    <link rel="stylesheet" href="../../../../css/theme.css" />
    <link rel="stylesheet" href="../../../../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
        <link href="../../../../css/custom.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "PRO CMP - TCF CMP Component";
        var mkdocs_page_input_path = "Gravito_Pro_CMP\\Components\\TCFCMP\\tcf_cmp.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../../../../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
      <script>hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../../../..">
          <img src="../../../../img/logo.png" class="logo" alt="Logo"/>
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../../../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption"><span class="caption-text">Getting started</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../../../Getting_started/Register/">Register</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../../Getting_started/Support/">Support</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../../Getting_started/Release_Notes/">Release Notes</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Consent Managment</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../../../Consent_Management/Iab_tcf/">IAB TCF</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../../Consent_Management/Google_consent_mode/">Google Consent Mode</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../../Consent_Management/Microsoft_consent_mode/">Microsoft Consent Mode</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Gravito CMP (New)</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../../../Gravito_V6_CMP/Getting_Started/">Getting Started</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../../Gravito_V6_CMP/Setup_and_Design/">Setup and Design</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../../Gravito_V6_CMP/Customization/">Customization</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../../Gravito_V6_CMP/Components/">Components</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../../Gravito_V6_CMP/Deployment/">Deployment</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../../Gravito_V6_CMP/FAQ/">FAQ's</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../../Gravito_V6_CMP/Release_Notes/">Release Notes</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Gravito SDK</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../../../Gravito_SDK/Getting_Started/">Getting Started</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../../Gravito_SDK/Release_Notes/">Release Notes</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../../Gravito_SDK/Version_2_%28Latest%29/">Version 2 (Latest)</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Gravito API</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../../../Gravito_API/Getting_Started/">Getting Started</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../../Gravito_API/Setup_and_Validation/">Setup and Validation</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../../Gravito_API/Version_3_%28Latest%29/">Version 3 (Latest)</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../../Gravito_API/Version_2/">Version 2</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../../Gravito_API/Microprofile/">Microprofile</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../../Gravito_API/CustomerdataApi/">Customer Data API</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Other Features</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../../../Other_Features/Domain_Cookie_Scan/">Domain Cookie Scan</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../../Other_Features/GVL_Comparison/">GVL Comparison</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Try it out</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../../../Try_it_out/Playbooks/">Playbooks</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../..">Gravito Documentation</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../../.." class="icon icon-home" aria-label="Docs"></a></li>
      <li class="breadcrumb-item active">PRO CMP - TCF CMP Component</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="pro-cmp-tcf-cmp-component">PRO CMP - TCF CMP Component</h1>
<h2 id="what-is-tcf-cmp">What is TCF CMP?</h2>
<p>It is a TCF 2.2 compliant consent management platform component. It is used to collect consent for TCF 2.2 purposes, special features, and vendors. It is a full-fledged CMP that can be used for any website. It can be used for GDPR compliance.</p>
<p>This will be port of Gravito TCF 2.2 CMP which is also listed as one of the <a href="https://support.google.com/admanager/answer/13554116?hl=en#zippy=%2Cgoogle-certified-cmps">Google Certified TCF CMP's</a> (<em>Web and App</em>)</p>
<h2 id="how-to-use-tcf-cmp-component-in-pro-cmp">How to use TCF CMP Component in PRO CMP?</h2>
<p>You can use the TCF CMP component in your PRO CMP while setting up your configuration. In PRO CMP Configurator's components tab, choose the <strong>TCF CMP</strong> component and then configure it as per your requirement.</p>
<p><img alt="" src="../../../img/tcf_configurator_setup.png" />  </p>
<h2 id="how-to-setup-tcf-cmp-component">How to setup TCF CMP Component?</h2>
<p>TCF CMP setup can be done using Pro CMP Configurator on Gravitoâ€™s Admin Portal.
Once you have selected the TCF CMP component in the configurator, it will add the TCF CMP tab in the left sidebar of the configurator. Click on it to open the TCF CMP-specific configurator area.</p>
<p><img alt="" src="../../../img/tcf_cmp_tab.png" /></p>
<p>In this section, you will find the following tabs:</p>
<ul>
<li>
<p><strong>TCF Settings</strong>: This tab is used to configure the consent-based settings. Here, you can configure the consentable items mentioned in the TCFv2.2 framework such as TCF vendors, purposes, special purposes, features, special features, enable/disable various integrations such as Google Consent Mode, Microsoft UET, etc., as well as adjust some advanced settings.</p>
<blockquote>
<p><strong>Note</strong>: Details on how to integrate with Google Consent Mode and Microsoft UET are already covered in the <a href="../tcf_cmp_uet/">Gravito TCF CMP UET</a> and <a href="../tcf_cmp_gcmv2/">Gravito TCF CMP GCM</a> documentation.</p>
</blockquote>
</li>
<li>
<p><strong>Languages</strong>: This tab is used to configure the languages for the CMP. You can add multiple languages and configure the text for each language.</p>
</li>
<li>
<p><strong>Appearance</strong>: This tab is used to configure the appearance of the CMP. In this tab, you can override the default styles of the CMP and configure the styles (CSS classes) as per your requirement.
In the provided code editor on this tab, you can add the CSS classes to override the default styles of the CMP.
Additionally, you can also choose the type of consent input controls you want to use in the CMP. You can choose between <strong>Checkbox</strong> and <strong>Toggle</strong>. The default value is <strong>Checkbox</strong>.</p>
<blockquote>
<p><strong>Note</strong>: Whatever CSS classes you add in this tab will be added as a separate stylesheet in the head of the page. So you can basically add any CSS syntax in this editor.</p>
</blockquote>
</li>
</ul>
<p>Help content for each field is provided in the configurator itself. You can hover over each field to see the help content.</p>
<h2 id="event-integration">Event &amp; Integration</h2>
<p>TCF CMP Component, when used with PRO CMP, dispatches various events in its lifecycle. All these events are dispatched under the common namespace of <code>gravito:tcfv2:client</code>. You can listen to these events on your website and take the required action.</p>
<p>To listen to these events, use the following code:</p>
<pre><code class="language-javascript">window.addEventListener('gravito:tcfv2:client', function (event) {
      let eventType = event.detail.eventType;
        // your code here
});
</code></pre>
<p>TCF Component exposes a current state of consent in window scope object. You can access the current state of consent using <code>window.gravitoCMP.currentState</code>. This object will have consent values for all the purposes, special features, and vendors used by CMP.</p>
<pre><code class="language-javascript">let currentState = window.gravitoCMP.currentState
// Current state will have the following structure:
let currentState = window.gravitoCMP.currentState
// Current state will have the following structure:
// {
//     &quot;whiteListVendors&quot;: {
//         &quot;consent&quot;: {
//             &quot;2&quot;: true,
//             &quot;6&quot;: true,
//             &quot;8&quot;: true,
//             &quot;11&quot;: true,
//             &quot;14&quot;: true,
//             &quot;278&quot;: false,
//             &quot;511&quot;: true,
//             &quot;755&quot;: true
//         },
//         &quot;legitimateInterests&quot;: {
//             &quot;2&quot;: true,
//             &quot;6&quot;: true,
//             &quot;8&quot;: true,
//             &quot;11&quot;: true,
//             &quot;14&quot;: true,
//             &quot;278&quot;: true,
//             &quot;511&quot;: true,
//             &quot;755&quot;: true
//         }
//     },
//     &quot;purposes&quot;: {
//         &quot;consent&quot;: {
//             &quot;1&quot;: true,
//             &quot;2&quot;: true,
//             &quot;3&quot;: true,
//             &quot;4&quot;: true,
//             &quot;5&quot;: true,
//             &quot;6&quot;: true,
//             &quot;7&quot;: true,
//             &quot;8&quot;: true,
//             &quot;9&quot;: true,
//             &quot;10&quot;: true,
//             &quot;11&quot;: true
//         },
//         &quot;legitimateInterests&quot;: {
//             &quot;1&quot;: false,
//             &quot;2&quot;: true,
//             &quot;3&quot;: false,
//             &quot;4&quot;: false,
//             &quot;5&quot;: false,
//             &quot;6&quot;: false,
//             &quot;7&quot;: true,
//             &quot;8&quot;: true,
//             &quot;9&quot;: true,
//             &quot;10&quot;: true,
//             &quot;11&quot;: true
//         }
//     },
//     &quot;specialFeatures&quot;: {
//         &quot;1&quot;: true,
//         &quot;2&quot;: true
//     },
//     &quot;customPurposes&quot;: {
//         &quot;consent&quot;: {
//             &quot;1&quot;: true,
//             &quot;2&quot;: true
//         },
//         &quot;legitimateInterests&quot;: {
//             &quot;1&quot;: true,
//             &quot;2&quot;: false
//         }
//     },
//     &quot;nonTCFVendors&quot;: [
//         {
//             &quot;id&quot;: 1,
//             &quot;name&quot;: &quot;Facebook&quot;,
//             &quot;consent&quot;: true
//         },
//         {
//             &quot;id&quot;: 2,
//             &quot;name&quot;: &quot;Amazon&quot;,
//             &quot;consent&quot;: false
//         }
//     ]
// }
  ;


</code></pre>
<blockquote>
<p><strong>Note</strong>: The above object is just an example. The actual object will have the values based on the user's consent and your configuration.</p>
</blockquote>
<p>You can use the above two code snippets to listen to events and get the current consent state of the CMP. 
For example, if you want to perform some action whenever a user gives/modifies consent, you can use the following code:</p>
<pre><code class="language-javascript">
window.addEventListener('gravito:tcfv2:client', function (event) {
      let eventType = event.detail.eventType;
      let consentUpdateEventsList = [
        &quot;layer1:opt-out:all&quot;,
        &quot;layer2:opt-out:all&quot;,
        &quot;layer2:opt-in:selected&quot;,
        &quot;layer1:opt-in:all&quot;,
        &quot;layer2:opt-in:all&quot;,
        &quot;opt-in:previously&quot;,
      ];
      if (consentUpdateEventsList.includes(eventType)) {
        // Get the current consent state
        let currentState = window.gravitoCMP.currentState;
        // Do your action here
      }
});
</code></pre>
<p>Below is the list of event types dispatched by the TCF CMP component:</p>
<table>
<thead>
<tr>
<th>Event Name</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>layer1:opt-out:all</td>
<td>This event is dispatched when a user opts out of all categories in layer 1 (Declaration Tab), i.e., clicked on the Reject All button on layer 1.</td>
</tr>
<tr>
<td>layer2:opt-out:all</td>
<td>This event is dispatched when a user opts out of all categories in layer 2 (Details Tab), i.e., clicked on the Reject All button on layer 2.</td>
</tr>
<tr>
<td>layer2:opt-in:selected</td>
<td>This event is dispatched when a user opts in to selected categories in layer 2 (Details Tab), i.e., clicked on the Accept Selected button.</td>
</tr>
<tr>
<td>layer1:opt-in:all</td>
<td>This event is dispatched when a user opts in to all categories in layer 1 (Declaration Tab), i.e., clicked on the Accept All button.</td>
</tr>
<tr>
<td>layer2:opt-in:all</td>
<td>This event is dispatched when a user opts in to all categories in layer 2 (Details Tab), i.e., clicked on the Accept All button.</td>
</tr>
<tr>
<td>layer1:settings</td>
<td>This event is dispatched when a user clicks the settings button on layer 1.</td>
</tr>
<tr>
<td>opt-in:previously</td>
<td>This event is dispatched when the user has already given consent and a consent cookie is present in the browser.</td>
</tr>
<tr>
<td>opt-in:previously:outdated</td>
<td>This event is dispatched when the user has already given consent but the consent cookie is outdated.</td>
</tr>
<tr>
<td>cmploaded</td>
<td>This event is dispatched when the CMP is loaded and ready to use.</td>
</tr>
<tr>
<td>ui-shown</td>
<td>This event is dispatched when the CMP UI is shown to the user.</td>
</tr>
<tr>
<td>gcm:default</td>
<td>This event is dispatched when the GCM default event is added to the dataLayer. This is specific to GCMv2 integration and will not fire if GCMv2 is not enabled or if using a GTM Template.</td>
</tr>
</tbody>
</table>
<h1 id="faqs">FAQ's</h1>
<ul>
<li>
<p><a href="../../../FAQ/How_to_resurface_ProCMP/">How to Resurface the CMP UI to All users and Collect Consent Again?</a></p>
</li>
<li>
<p><a href="../../../FAQ/How_to_addCustomFonts/">How to use your custom font in CMP?</a></p>
</li>
<li><a href="../../../FAQ/How_to_be_google_complaint/">How to Provide Google with the Required Legititimate Interest's Even on Reject All Action?</a></li>
</ul>
              
            </div>
          </div><footer>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
    
  </span>
</div>
    <script src="../../../../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "../../../..";</script>
    <script src="../../../../js/theme_extra.js"></script>
    <script src="../../../../js/theme.js"></script>
      <script src="../../../../js/modal.js"></script>
      <script src="../../../../js/motomo.js"></script>
      <script src="../../../../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
