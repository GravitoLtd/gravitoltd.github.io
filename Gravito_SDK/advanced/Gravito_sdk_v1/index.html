<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../../../img/favicon.ico" />
    <title>Gravito SDK V1 - Gravito Documentation</title>
    <link rel="stylesheet" href="../../../css/theme.css" />
    <link rel="stylesheet" href="../../../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
        <link href="../../../css/custom.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Gravito SDK V1";
        var mkdocs_page_input_path = "Gravito_SDK\\advanced\\Gravito_sdk_v1.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../../../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
      <script>hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../../..">
          <img src="../../../img/logo.png" class="logo" alt="Logo"/>
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption"><span class="caption-text">Getting started</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../../Getting_started/Register/">Register</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../Getting_started/Support/">Support</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../Getting_started/Release_Notes/">Release Notes</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Gravito Pro CMP</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../../Gravito_Pro_CMP/Getting_Started/">Getting Started</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../Gravito_Pro_CMP/Setup_and_Design/">Setup and Design</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../Gravito_Pro_CMP/Release_Notes/">Release Notes</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Gravito Intelligent CMP</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../../Gravito_Intelligent_CMP/Getting_Started/">Getting Started</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../Gravito_Intelligent_CMP/Setup_and_Design/">Setup and Design</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../Gravito_Intelligent_CMP/GTM_Template/">GTM Template</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../Gravito_Intelligent_CMP/Release_Notes/">Release Notes</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../Gravito_Intelligent_CMP/Advanced_Features/">Advanced Features</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Gravito TCF 2.2 CMP</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../../Gravito_TCF_2.2_CMP/Getting_Started/">Getting Started</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../Gravito_TCF_2.2_CMP/Setup_and_Design/">Setup and Design</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../Gravito_TCF_2.2_CMP/Mobile_apps/">Mobile apps</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../Gravito_TCF_2.2_CMP/Release_Notes/">Release Notes</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../Gravito_TCF_2.2_CMP/Advanced_features/">Advanced features</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Gravito SDK</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../Getting_Started/">Getting Started</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../Release_Notes/">Release Notes</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../Version_2_%28Latest%29/">Version 2 (Latest)</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Gravito API</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../../Gravito_API/Getting_Started/">Getting Started</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../Gravito_API/Setup_and_Validation/">Setup and Validation</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../Gravito_API/Version_3_%28Latest%29/">Version 3 (Latest)</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../Gravito_API/Version_2/">Version 2</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../Gravito_API/Microprofile/">Microprofile</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../Gravito_API/CustomerdataApi/">Customer Data API</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Other Features</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../../Other_Features/Domain_Cookie_Scan/">Domain Cookie Scan</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../Other_Features/GVL_Comparison/">GVL Comparison</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../Other_Features/Prebid_User_Id_Module/">Prebid User Id Module</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Try it out</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../../Try_it_out/Playbooks/">Playbooks</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../..">Gravito Documentation</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../.." class="icon icon-home" aria-label="Docs"></a></li>
      <li class="breadcrumb-item active">Gravito SDK V1</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="gravito-sdk-v1">Gravito SDK V1</h1>
<h2 id="using-sdk-v1">Using SDK V1</h2>
<p>Version 1.0.10Â added support for custom functions to call before initializing CMP and call back when backend data is available. This is useful for any type of integration with backend API that can store the consents (and perhaps other profile information). Example deployment, defining custom backend sync interval (60 secs), default is 1800 secs (30 mins):</p>
<pre><code>window.gravitoCMPConfig = gravitoCMPConfig;

gravitoCMPConfig.core.syncAfter=60;

function getCmpData() {
            //data fetching logic  here
            var date = new Date(&quot;06/30/2022&quot;)
            var domain = window.location.hostname
            var value = null
            var xhr = new XMLHttpRequest();
            xhr.open(&quot;POST&quot;, 'https://gto.gravito.net/api/firstparty', true);
            xhr.withCredentials = true;
            xhr.onreadystatechange = function (response) {
                if (xhr.readyState == XMLHttpRequest.DONE &amp;&amp; xhr.status == 200) {
                    console.log(&quot;1P response : &quot; + response.target.response);
                    var result = JSON.parse(response.target.response)
                    if (result.events) {
                        var gdata = result.events.gravitoData ? JSON.parse(result.events.gravitoData) : null
                        value = gdata ? gdata.TCString : null
                        if (value) {
                            document.cookie =
                                &quot;TcString&quot; +
                                &quot;=&quot; +
                                value +
                                &quot;; expires=&quot; +
                                date.toGMTString() +
                                &quot;; path=/; domain=&quot; +
                                domain;
                        }
                        if (gdata) {
                            document.cookie =
                                &quot;gravitoData&quot; +
                                &quot;=&quot; +
                                JSON.stringify(gdata) +
                                &quot;; expires=&quot; +
                                date.toGMTString() +
                                &quot;; path=/; domain=&quot; +
                                domain;
                        }

                    }
                    var obj = {
                        senderId: &quot;gravitoCMPSuperWrapper&quot;,
                        status: &quot;ready&quot;,
                    };
                    window.postMessage(obj, &quot;*&quot;);
                }
            }
            xhr.send();

        }
        function postCmpData(data) {
            console.log(&quot;data&quot;, data)
            var gravitoData = JSON.stringify(data)
            var xhr = new XMLHttpRequest();
            xhr.open(&quot;POST&quot;, 'https://gto.gravito.net/api/firstparty?gravitoData=' + gravitoData, true);
            xhr.withCredentials = true;
            xhr.onreadystatechange = function (response) {
                if (xhr.readyState == XMLHttpRequest.DONE &amp;&amp; xhr.status == 200) {
                    console.log(&quot;1P response : &quot; + response.target.response);
                }
            }
            xhr.send();
        }
        var gravitoSdkTag = document.createElement(&quot;script&quot;);
        gravitoSdkTag.src = &quot;https://cdn.gravito.net/sdk/gravitoSDK_latest.js&quot;;
        gravitoSdkTag.onload = function () {
            window.gravito.ready(function () {
                gravito.initTCFCMPWithCustomBackend(getCmpData, function () {
                    gravito.initTCFCMP(
                        &quot;https://cdn.gravito.net/tcf-v2&quot;,
                        &quot;https://cdn.gravito.net/cmpbuilds&quot;,
                        &quot;bundle_latest_2&quot;
                    );
                }, postCmpData)
            });
        };
document.body.appendChild(gravitoSdkTag);
</code></pre>
              
            </div>
          </div><footer>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
    
  </span>
</div>
    <script src="../../../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "../../..";</script>
    <script src="../../../js/theme_extra.js"></script>
    <script src="../../../js/theme.js"></script>
      <script src="../../../js/modal.js"></script>
      <script src="../../../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
