<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../../img/favicon.ico" />
    <title>Version 2 - Gravito Documentation</title>
    <link rel="stylesheet" href="../../css/theme.css" />
    <link rel="stylesheet" href="../../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
        <link href="../../css/custom.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Version 2";
        var mkdocs_page_input_path = "Gravito_API\\Version_2.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
      <script>hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../..">
          <img src="../../img/logo.png" class="logo" alt="Logo"/>
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption"><span class="caption-text">Getting started</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../Getting_started/Register/">Register</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../Getting_started/Support/">Support</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../Getting_started/Release_Notes/">Release Notes</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Gravito Pro CMP</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../Gravito_Pro_CMP/Getting_Started/">Getting Started</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../Gravito_Pro_CMP/Setup_and_Design/">Setup and Design</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../Gravito_Pro_CMP/Release_Notes/">Release Notes</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Gravito Intelligent CMP</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../Gravito_Intelligent_CMP/Getting_Started/">Getting Started</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../Gravito_Intelligent_CMP/Setup_and_Design/">Setup and Design</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../Gravito_Intelligent_CMP/GTM_Template/">GTM Template</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../Gravito_Intelligent_CMP/Release_Notes/">Release Notes</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../Gravito_Intelligent_CMP/Advanced_Features/">Advanced Features</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Gravito TCF 2.2 CMP</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../Gravito_TCF_2.2_CMP/Getting_Started/">Getting Started</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../Gravito_TCF_2.2_CMP/Setup_and_Design/">Setup and Design</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../Gravito_TCF_2.2_CMP/Mobile_apps/">Mobile apps</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../Gravito_TCF_2.2_CMP/Release_Notes/">Release Notes</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../Gravito_TCF_2.2_CMP/Advanced_features/">Advanced features</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Gravito SDK</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../Gravito_SDK/Getting_Started/">Getting Started</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../Gravito_SDK/Release_Notes/">Release Notes</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../Gravito_SDK/Version_2_%28Latest%29/">Version 2 (Latest)</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Gravito API</span></p>
              <ul class="current">
                  <li class="toctree-l1"><a class="reference internal" href="../Getting_Started/">Getting Started</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../Setup_and_Validation/">Setup and Validation</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../Version_3_%28Latest%29/">Version 3 (Latest)</a>
                  </li>
                  <li class="toctree-l1 current"><a class="reference internal current" href="#">Version 2</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#first-party-api-microprofile">First party API / Microprofile</a>
    </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../Microprofile/">Microprofile</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../CustomerdataApi/">Customer Data API</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Other Features</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../Other_Features/Cookie_Scanner/">Cookie Scanner</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../Other_Features/GVL_Comparison/">GVL Comparison</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../Other_Features/Prebid_User_Id_Module/">Prebid User Id Module</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Try it out</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../Try_it_out/Playbooks/">Playbooks</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../..">Gravito Documentation</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../.." class="icon icon-home" aria-label="Docs"></a></li>
          <li class="breadcrumb-item">Gravito API</li>
      <li class="breadcrumb-item active">Version 2</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="version-2">Version 2</h1>
<h2 id="first-party-api-microprofile">First party API / Microprofile</h2>
<p>Most common use for first party microprofile is to store CMP consents and other metadata on it. That configuration is automatically generated by CMP configurator, just select "with backend" option when generating the deployment script and choose right first party domain from the menu.</p>
<p>The properties that can be managed with with a First party Microprofile V2 looks like this.</p>
<pre><code>{
  &quot;id&quot;: &quot;&lt;microprofileid&gt;&quot;,
  &quot;referer&quot;: &quot;&lt;originDomain&gt;&quot;,
  &quot;events&quot;: { &quot;key1&quot;:&quot;value1&quot;,
              &quot;key2&quot;:&quot;value2&quot;
   }
}
</code></pre>
<p><em>Note: The features available in the Microprofile has been improved a lot in the version 3. You can look at the documentation here.</em></p>
<p>If there would be other needs to use microprofile to act as keyring store, store context analytics results (e.g. segments) or something similar, the calls to first party API microprofile would look something like this:</p>
<p>Get profile</p>
<pre><code>(function gtoFirstParty() {
  var xhr = new XMLHttpRequest();
  xhr.open(&quot;POST&quot;, 'https://gto.&lt;&lt;domain&gt;&gt;/api/v2/firstparty', true);
  xhr.withCredentials = true;
  xhr.onreadystatechange = function(response) {
    if(xhr.readyState == XMLHttpRequest.DONE &amp;&amp; xhr.status == 200) {
      console.log(&quot;1P echo : &quot; + response.target.response);
    }
  }
  xhr.send();
})();
</code></pre>
<p>Send data to profile</p>
<pre><code>(function gtoFirstParty() {
  var xhr = new XMLHttpRequest();
  xhr.open(&quot;POST&quot;, 'https://gto.&lt;&lt;domain&gt;&gt;/api/v2/firstparty?attribute1=value1', true);
  xhr.withCredentials = true;
  xhr.onreadystatechange = function(response) {
    if(xhr.readyState == XMLHttpRequest.DONE &amp;&amp; xhr.status == 200) {
      console.log(&quot;1P echo : &quot; + response.target.response);
    }
  }
  xhr.send();
})();

Connect cookies across domains, this can be done e.g. using user ID:
</code></pre>
<pre><code>(function gtoFirstParty() {​
  var xhr = new XMLHttpRequest();​
  xhr.open(&quot;POST&quot;, 'https://gto.&lt;&lt;domain&gt;&gt;/api/v2/firstparty?matchOnId=123', true);  ​
  xhr.withCredentials = true;​
  xhr.onreadystatechange = function(response) {​
    if(xhr.readyState == XMLHttpRequest.DONE &amp;&amp; xhr.status == 200) {​
      console.log(&quot;1P echo : &quot; + response.target.response);​
    } ​
  }​
xhr.send();​
})();
</code></pre>
<p>matchOnID is the only reserved key value pair, it allows retrieving the cookie set for particular ID (e.g. logged in user has UID known) from other domain. A user with a matchOnId can be dealt with in 3 different ways to change the particular Id associated in 3 different ways.</p>
<ul>
<li>reset<ul>
<li>Reset value for the matchOnId can be used to clear all the values from the events key value pair temporarily.</li>
</ul>
</li>
<li>disconnect<ul>
<li>Disconnect value for the matchOnId can be used to remove the matchOnId from the events key value pair.</li>
</ul>
</li>
<li>delete<ul>
<li>Delete keyword for the matchOnId can be used to delete the whole events and the existing microProfileId provided.</li>
<li>This operation will reset the microProfileId and give you a new one.</li>
</ul>
</li>
</ul>
<p>Note: In all these cases passing the matchOnId value for a particular ID (e.g. logged in user has UID known) can resurface the whole profile again for your convenience.</p>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../Version_3_%28Latest%29/" class="btn btn-neutral float-left" title="Version 3 (Latest)"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../Microprofile/" class="btn btn-neutral float-right" title="Microprofile">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
      <span><a href="../Version_3_%28Latest%29/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../Microprofile/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script src="../../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "../..";</script>
    <script src="../../js/theme_extra.js"></script>
    <script src="../../js/theme.js"></script>
      <script src="../../js/modal.js"></script>
      <script src="../../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
