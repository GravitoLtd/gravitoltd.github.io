<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../../../img/favicon.ico" />
    <title>Render Certain Elements Based on Consent value provided by Gravito CMP - Gravito Documentation</title>
    <link rel="stylesheet" href="../../../css/theme.css" />
    <link rel="stylesheet" href="../../../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
        <link href="../../../css/custom.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Render Certain Elements Based on Consent value provided by Gravito CMP";
        var mkdocs_page_input_path = "Gravito_Intelligent_CMP\\advanced\\Consent_based_rendiering.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../../../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
      <script>hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../../..">
          <img src="../../../img/logo.png" class="logo" alt="Logo"/>
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption"><span class="caption-text">Getting started</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../../Getting_started/Register/">Register</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../Getting_started/Support/">Support</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../Getting_started/Release_Notes/">Release Notes</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Consent Managment</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../../Consent_Management/Iab_tcf/">IAB TCF</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../Consent_Management/Google_consent_mode/">Google Consent Mode</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../Consent_Management/Microsoft_consent_mode/">Microsoft Consent Mode</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Gravito CMP (New)</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../../Gravito_V6_CMP/Getting_Started/">Getting Started</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../Gravito_V6_CMP/Setup_and_Design/">Setup and Design</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../Gravito_V6_CMP/Customization/">Customization</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../Gravito_V6_CMP/Components/">Components</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../Gravito_V6_CMP/Deployment/">Deployment</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../Gravito_V6_CMP/FAQ/">FAQ's</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../Gravito_V6_CMP/Release_Notes/">Release Notes</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Gravito SDK</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../../Gravito_SDK/Getting_Started/">Getting Started</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../Gravito_SDK/Release_Notes/">Release Notes</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../Gravito_SDK/Version_2_%28Latest%29/">Version 2 (Latest)</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Gravito API</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../../Gravito_API/Getting_Started/">Getting Started</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../Gravito_API/Setup_and_Validation/">Setup and Validation</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../Gravito_API/Version_3_%28Latest%29/">Version 3 (Latest)</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../Gravito_API/Version_2/">Version 2</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../Gravito_API/Microprofile/">Microprofile</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../Gravito_API/CustomerdataApi/">Customer Data API</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Other Features</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../../Other_Features/Domain_Cookie_Scan/">Domain Cookie Scan</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../Other_Features/GVL_Comparison/">GVL Comparison</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Try it out</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../../Try_it_out/Playbooks/">Playbooks</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../..">Gravito Documentation</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../.." class="icon icon-home" aria-label="Docs"></a></li>
      <li class="breadcrumb-item active">Render Certain Elements Based on Consent value provided by Gravito CMP</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="render-certain-elements-based-on-consent-value-provided-by-gravito-cmp">Render Certain Elements Based on Consent value provided by Gravito CMP</h1>
<p>Gravito CMP emits events to DOM whenever user takes any action on the consent banner. You can use these events to render certain elements based on the consent value provided by Gravito CMP.</p>
<p>To listen to these events, you can use the following code snippet:</p>
<pre><code class="language-javascript"> window.addEventListener(&quot;gravito:cmp:light&quot;, function (e) {
        var syncEvents = [
          &quot;layer1:opt-out:all&quot;,
          &quot;layer2:opt-out:all&quot;,
          &quot;layer2:opt-in:selected&quot;,
          &quot;layer1:opt-in:all&quot;,
          &quot;layer2:opt-in:all&quot;,
          &quot;opt-in:previously&quot;,
          &quot;cmploaded&quot;,
        ];
        if (syncEvents.includes(e.detail.eventType)) {
        //  consent values was updated/changed
        // opt-in:previously event is fired when user has already given consent and has cookies

        }
      });

</code></pre>
<p>When the events are triggered you can check the consent value and update the elements vissibilty.here is an example of how to do that:</p>
<pre><code class="language-javascript">function updateViewState() {
        console.log(&quot;updateViewState&quot;);
        let id = 2; // id of the consent you want to check
        let elementID = &quot;YOUR_ELEMENT_ID&quot;; // id of the map
        // to check for consent value of cookie
        let isCookieConsent =
          window.gravitoLightCMP.consentHandler.getConsentValue(2);
        //  on basis of the consent value you can hide/show map
        if (!isCookieConsent) {
          document.getElementById(elementID).style.display = &quot;none&quot;;
        } else {
          document.getElementById(elementID).style.display = &quot;block&quot;;
        }
      }
</code></pre>
<p>You can call this function in the event listener to update the view state whenever the consent value changes.</p>
<pre><code class="language-javascript">function updateViewState() {
        console.log(&quot;updateViewState&quot;);
        let id = 2; // id of the consent you want to check
        let elementID = &quot;YOUR_ELEMENT_ID&quot;; // id of the map
        // to check for consent value of cookie
        let isCookieConsent =
          window.gravitoLightCMP.consentHandler.getConsentValue(2);
        //  on basis of the consent value you can hide/show map
        if (!isCookieConsent) {
          document.getElementById(elementID).style.display = &quot;none&quot;;
        } else {
          document.getElementById(elementID).style.display = &quot;block&quot;;
        }
      }

window.addEventListener(&quot;gravito:cmp:light&quot;, function (e) {
        var syncEvents = [
          &quot;layer1:opt-out:all&quot;,
          &quot;layer2:opt-out:all&quot;,
          &quot;layer2:opt-in:selected&quot;,
          &quot;layer1:opt-in:all&quot;,
          &quot;layer2:opt-in:all&quot;,
          &quot;opt-in:previously&quot;,
          &quot;cmploaded&quot;,
        ];
        if (syncEvents.includes(e.detail.eventType)) {
          updateViewState();
        }
      });
</code></pre>
<p>In some cases you might want to show a button or clickable items as the placeholder for hidden elements, if there is no consent. On clicking the button you can call a accept all method to accept all the consents and show the elements.</p>
<p>CMP provides a method to accept all the consents.You can call this method on the button click to accept all the consents and call the updateViewState method to show the elements.</p>
<pre><code class="language-javascript">function buttonClick() {
      window.gravitoLightCMP.useractionHandler.saveAll()
        updateViewState();
      }
</code></pre>
              
            </div>
          </div><footer>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
    
  </span>
</div>
    <script src="../../../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "../../..";</script>
    <script src="../../../js/theme_extra.js"></script>
    <script src="../../../js/theme.js"></script>
      <script src="../../../js/modal.js"></script>
      <script src="../../../js/motomo.js"></script>
      <script src="../../../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
