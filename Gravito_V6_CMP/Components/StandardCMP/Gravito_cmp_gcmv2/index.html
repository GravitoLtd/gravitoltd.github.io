<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../../../../img/favicon.ico" />
    <title>Google Consent Mode v2 - Gravito Documentation</title>
    <link rel="stylesheet" href="../../../../css/theme.css" />
    <link rel="stylesheet" href="../../../../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
        <link href="../../../../css/custom.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Google Consent Mode v2";
        var mkdocs_page_input_path = "Gravito_V6_CMP\\Components\\StandardCMP\\Gravito_cmp_gcmv2.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../../../../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
      <script>hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../../../..">
          <img src="../../../../img/logo.png" class="logo" alt="Logo"/>
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../../../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption"><span class="caption-text">Getting started</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../../../Getting_started/Register/">Register</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../../Getting_started/Support/">Support</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../../Getting_started/Release_Notes/">Release Notes</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Consent Managment</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../../../Consent_Management/Iab_tcf/">IAB TCF</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../../Consent_Management/Google_consent_mode/">Google Consent Mode</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../../Consent_Management/Microsoft_consent_mode/">Microsoft Consent Mode</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Gravito CMP (New)</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../../Getting_Started/">Getting Started</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../Setup_and_Design/">Setup and Design</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../Customization/">Customization</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../">Components</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../Deployment/">Deployment</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../FAQ/">FAQ's</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../Release_Notes/">Release Notes</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Gravito SDK</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../../../Gravito_SDK/Getting_Started/">Getting Started</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../../Gravito_SDK/Release_Notes/">Release Notes</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../../Gravito_SDK/Version_2_%28Latest%29/">Version 2 (Latest)</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Gravito API</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../../../Gravito_API/Getting_Started/">Getting Started</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../../Gravito_API/Setup_and_Validation/">Setup and Validation</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../../Gravito_API/Version_3_%28Latest%29/">Version 3 (Latest)</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../../Gravito_API/Version_2/">Version 2</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../../Gravito_API/Microprofile/">Microprofile</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../../Gravito_API/CustomerdataApi/">Customer Data API</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Other Features</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../../../Other_Features/Domain_Cookie_Scan/">Domain Cookie Scan</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../../Other_Features/GVL_Comparison/">GVL Comparison</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Try it out</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../../../Try_it_out/Playbooks/">Playbooks</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../..">Gravito Documentation</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../../.." class="icon icon-home" aria-label="Docs"></a></li>
      <li class="breadcrumb-item active">Google Consent Mode v2</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="google-consent-mode-v2">Google Consent Mode v2</h1>
<h2 id="what-is-google-consent-mode-v2">What is Google Consent Mode v2?</h2>
<p><strong>Google Consent Mode v2</strong> allows you to adjust how Google tags behave based on the user's consent choices. Gravito CMP collects and stores user consent and integrates with Google Consent Mode to share that status with Google. When consent is limited or denied, Google tags adjust accordingly (e.g., restricted storage or other consent-aware behavior). Consent Mode is not a banner and not a legal compliance solution; it operates in tandem with our CMP; you remain responsible for obtaining any required consents.</p>
<p>Consent Mode v2 particularly impacts:</p>
<ul>
<li><strong>Cookies</strong></li>
<li><strong>Ad Personalization</strong></li>
<li><strong>Analytics Tracking</strong></li>
</ul>
<p>With <strong>Consent Mode v2</strong>, Google introduced two <strong>new consent signals</strong> required to comply with the <strong>EU Digital Markets Act (DMA)</strong>:</p>
<h3 id="consent-signals">Consent Signals:</h3>
<ul>
<li><code>ad_storage</code></li>
<li><code>analytics_storage</code></li>
<li><code>ad_user_data</code> (ðŸ†•)</li>
<li><code>ad_personalization</code> (ðŸ†•)</li>
<li><code>functionality_storage</code></li>
<li><code>personalization_storage</code></li>
<li><code>security_storage</code></li>
</ul>
<blockquote>
<p>The new signals <code>ad_user_data</code> and <code>ad_personalization</code> are essential under DMA for platforms like Google Ads and should be set according to user consent.</p>
</blockquote>
<p><strong>Note:</strong> The <code>functionality_storage</code>, <code>personalization_storage</code>, and <code>security_storage</code> signals can only be set to <code>granted</code> or <code>denied</code>.</p>
<p><strong><a href="https://developers.google.com/tag-platform/devguides/consent">Official Google Documentation on Consent Mode v2</a></strong></p>
<hr />
<h2 id="enabling-google-consent-mode-v2-in-gravito-cmp-new">Enabling Google Consent Mode v2 in Gravito CMP (New)</h2>
<h3 id="creating-config-in-admin-portal">Creating Config in Admin Portal</h3>
<ol>
<li><strong>Login</strong> to the Gravito Admin Portal.</li>
<li>Click on the <strong>CMP</strong> tab.</li>
<li>Select the <strong>Gravito CMP (New) Configurator</strong> from the options.</li>
<li>On the CMP Config listing page, click the <strong>New Configuration</strong> button to create a new CMP Config.</li>
<li>
<p>Give the config an appropriate name and choose <strong>Standard CMP</strong> as the <strong>Framework</strong>. After that, click <strong>Get Started</strong> to proceed.</p>
<p><img alt="" src="../../../img/configurator_setup.png" /></p>
</li>
<li>
<p>Now navigate to the <strong>Standard CMP</strong> tab and <strong>Consent Categories</strong> sub-tab for GCMv2-related setup.</p>
</li>
<li>You can enable GCM by selecting the checkbox labeled <strong>Google's GCM-V2</strong>.</li>
<li>
<p>After enabling GCM, some additional fields will appear for configuration.</p>
<p><img alt="" src="../../../img/gcm_setup.png" /></p>
<ul>
<li><strong>Use GCM Advanced Mode</strong> is enabled by default. You can uncheck this if you want to use the <strong>Basic Mode</strong>.</li>
<li>All other fields are related to Google consent signal mapping. They are explained below.</li>
</ul>
</li>
</ol>
<p><strong>Note:</strong> When using GCM Basic Mode, the <strong>GTM template</strong> deployment option will not be available.</p>
<h4 id="consent-mapping">Consent Mapping:</h4>
<p>Youâ€™ll now see dropdowns to map categories for the following Google consent signals:
- <code>ad_storage</code>
- <code>ad_user_data</code>
- <code>ad_personalization</code>
- <code>analytics_storage</code>
- <code>functionality_storage</code>
- <code>personalization_storage</code>
- <code>security_storage</code></p>
<p>For each of these, select the relevant <strong>consent category</strong> from the dropdown list. You will see default mappings, but you can change them as per your requirements.</p>
<p>Additionally, you can set the default values for <code>functionality_storage</code>, <code>personalization_storage</code>, and <code>security_storage</code> to either <code>granted</code> or <code>denied</code>.</p>
<p>Once mappings are complete, you may continue filling out the other CMP configuration steps or jump directly to the <strong>Deployment</strong> tab for publishing your config.</p>
<blockquote>
<p><strong>Note:</strong> If you are using <strong>GCM Basic Mode</strong>, you will see additional logic in your deployment script.</p>
</blockquote>
<p><img alt="" src="../../../img/additional_Gtm_logic.png" /></p>
<p>Below the comment <code>// Insert your GTM script here</code>, you can add your GTM script. You can get the GTM script from your GTM account. It will look like this:</p>
<pre><code class="language-js">(function (w, d, s, l, i) {
  w[l] = w[l] || [];
  w[l].push({ &quot;gtm.start&quot;: new Date().getTime(), event: &quot;gtm.js&quot; });
  var f = d.getElementsByTagName(s)[0],
    j = d.createElement(s),
    dl = l != &quot;dataLayer&quot; ? &quot;&amp;l=&quot; + l : &quot;&quot;;
  j.async = true;
  j.src = &quot;https://www.googletagmanager.com/gtm.js?id=&quot; + i + dl;
  f.parentNode.insertBefore(j, f);
})(window, document, &quot;script&quot;, &quot;dataLayer&quot;, &quot;{{Your_GTM_ID}}&quot;);
</code></pre>
<h3 id="custom-events-in-datalayer">Custom Events in dataLayer</h3>
<p>Gravito SDK as well as the GTM template will automatically push custom events to the <code>dataLayer</code> based on user consent choices. These events can be used to trigger specific tags in Google Tag Manager.</p>
<p>The following events are pushed by Gravito for consent updates:</p>
<ul>
<li><strong>gravitoGCMConsents</strong>:
  This event is triggered when there is an update in the Gravito Consent Management (GCM) consents. It pushes the current consent states as an object, which can be used for conditional tag firing in GTM.</li>
</ul>
<p><code>javascript
  dataLayer.push({
    event: "gravitoGCMConsents",
    consents: consents,  // Object containing the user's consent states
  });</code></p>
<p>These events enable granular control over tag firing based on user consent preferences, ensuring compliance with privacy regulations and enhancing data governance within GTM.</p>
<p>You can listen for these events inside GTM and create triggers that activate tags only when the required consent conditions are met.</p>
              
            </div>
          </div><footer>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
    
  </span>
</div>
    <script src="../../../../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "../../../..";</script>
    <script src="../../../../js/theme_extra.js"></script>
    <script src="../../../../js/theme.js"></script>
      <script src="../../../../js/modal.js"></script>
      <script src="../../../../js/motomo.js"></script>
      <script src="../../../../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
